{{ $objData := .object }}
{{ $path := .path }}


<div class="python-ref {{ if (eq $objData.kind " function") }} python-ref-func {{ else }} python-ref-class {{ end }}">
{{ if and (eq $objData.kind "function")}}

{{ $parenthesisArgsString := partial "python-function-parenthesis.html" $objData}}
{{ if not $objData.is_property }}
<p><code>
    {{ (index (last 1 $path) 0) }}({{- $parenthesisArgsString -}}) -> {{ partial "python-api-link-partial.html" $objData.signature.return_annotation}}
</code></p>
{{ else }}
    <p><code>
    {{ (index (last 1 $path) 0) }} -> {{ partial "python-api-link-partial.html" $objData.signature.return_annotation}}
    </code></p>
{{ end }}

{{ if $objData.docstring_parsed}}
<div class="python-ref-description">
    <p> {{ partial "python-api-link-all-partial.html" $objData.docstring_parsed.short_description | safeHTML }}</p>
    <p> {{ partial "python-api-link-all-partial.html" $objData.docstring_parsed.long_description | safeHTML }}</p>
</div>
{{ end }}

{{ if not $objData.is_property }}
<h4> Parameters </h4>
{{ if $objData.docstring_parsed }}
{{ if (index $objData.docstring_parsed "params") }}
{{ if (gt (len $objData.docstring_parsed.params)  0) }}
    <table class="gd-docs-parameters-block">
        <thead>
            <tr>
                <th>name</th>
                <th>type</th>
                <th>description</th>
            </tr>
        </thead>
        <tbody>
        {{range $objData.docstring_parsed.params}}
            <tr>
                <td> {{ .arg_name }} </td>
                <td> {{ partial "python-api-link-partial.html" .type_name }} </td>
                <td> {{ partial "python-api-link-all-partial.html" .description | safeHTML }} </td>
            </tr>
        {{end}}
        </tbody>
    </table>
{{ else }}
    <i> None </i>
{{ end }}
{{ else if (ne $objData.signature.return_type "None") }}
    <table class="gd-docs-parameters-block">
        <thead>
            <tr>
                <th>name</th>
                <th>type</th>
                <th>description</th>
            </tr>
        </thead>
        <tbody>
        {{range $objData.signature.params}}
            <tr>
                <td> {{ index . 0 }} </td>
                <td> {{ partial "python-api-link-partial.html" (index . 1) }} </td>
                <td> <i> None </i> </td>
            </tr>
        {{end}}
        </tbody>
    </table>
{{ else }}
    <i> None </i>
{{ end }}
{{ else }}
    <i> None </i>
{{ end }}
{{ end }}

<h4> Returns </h4>
{{ if $objData.docstring_parsed }}
{{ if not $objData.docstring_parsed.returns }}
<i> No docs </i>
{{ else if or $objData.docstring_parsed.returns.type_name (ne $objData.signature.return_annotation "None") }}
{{ $typeName := "" }}
{{ if $objData.docstring_parsed.returns.type_name }}
    {{ $typeName = $objData.docstring_parsed.returns.type_name }}
{{ else }}
    {{ $typeName = $objData.signature.return_type }}
{{ end }}

{{ $description := $objData.docstring_parsed.returns.description }}

<table class="gd-docs-parameters-block">
<thead>
<tr>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
    {{ partial "python-api-link-partial.html" $typeName }}
</td>
<td>
    {{ if $description }}
    {{ partial "python-api-link-all-partial.html" $objData.docstring_parsed.returns.description | safeHTML }}
    {{ else }}
    <i> None </i>
    {{ end }}
</td>
</tr>
</tbody>
</table>
{{ else }}
<i> None </i>
{{ end }}
{{ else }}
<i> No docs </i>
{{ end }}

{{ else if and (eq $objData.kind "class") }}
<h1> {{index (last 2 $path) 0}}.{{ index (last 1 $path) 0 }} </h1>
{{ if $objData.docstring_parsed }}
<div class="python-ref-description">
    <p> {{ partial "python-api-link-all-partial.html" $objData.docstring_parsed.short_description | safeHTML }}</p>
    <p> {{ partial "python-api-link-all-partial.html" $objData.docstring_parsed.long_description | safeHTML }}</p>
</div>
{{ end }}
{{end}}
</div>
