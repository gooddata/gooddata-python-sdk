name: Hugo Build
description: Builds documentation using Hugo
inputs:
  base-url:
    required: true
    description: Base url used during build

runs:
  using: "composite"
  steps:
  - name: "Setup GO"
    uses: actions/setup-go@v4
    with:
      go-version: '>=1.20.1'
  - name: "Setup Node"
    uses: actions/setup-node@v3
    with:
      node-version: 18
  - name: "Setup Hugo"
    uses: peaceiris/actions-hugo@v3
    with:
      extended: true
      hugo-version: '0.110.0'
  - name: "Build"
    env:
      BASE_URL: ${{ inputs.base-url }}
    shell: bash
    run: |
      cd docs
      npm install
      hugo --minify ${BASE_URL:+--baseURL $BASE_URL} -e _default
