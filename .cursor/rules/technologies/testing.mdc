---
description: Validation and testing - VCR cassettes for HTTP snapshots
alwaysApply: false
---

# Validation & Testing

## Validation Flow

**If gdc-ruler MCP server is available**:
```
validate_python(path=".")                    # Full validation
validate_python(path=".", steps=["format", "lint"])  # Quick check
```

**Manual commands** (from workspace root):
```bash
make format-fix  # ruff format + fix
make mypy        # Type check (aliased as `make types`)
make test        # pytest via tox (all Python versions)
```

**Scoped**:
```bash
TEST_ENVS=py312,py313 make test           # Specific Python versions
ADD_ARGS="-k test_catalog" make test      # Filter tests
RECREATE_ENVS=1 make test                 # Force tox rebuild
```

**CI-like**: `make test-ci` (Docker-based)

## VCR Cassettes (HTTP Snapshots)

**Purpose**: Record GoodData Cloud HTTP calls for reproducible tests.

**Update workflow** (when API changes):
```bash
docker-compose up          # Start local GoodData Cloud
make remove-cassettes      # Delete old fixtures
make test                  # Generates new cassettes
git add tests/**/fixtures/*.yaml
```

**Location**: `tests/**/fixtures/*.yaml`

## Test Pattern

```python
@vcr.use_cassette("tests/catalog/fixtures/test_workspace.yaml")
def test_get_workspace(sdk):
    workspace = sdk.catalog_workspace.get_workspace("demo")
    assert workspace.id == "demo"
```

## Dependencies

Required: technologies/python
Related: general/general
