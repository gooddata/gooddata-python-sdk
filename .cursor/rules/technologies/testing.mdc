# (C) 2025 GoodData Corporation
---
description: Validation and testing - VCR cassettes for HTTP snapshots
alwaysApply: false
---

# Validation & Testing

## Validation Flow

**From workspace root**:
```bash
make format-fix  # ruff format + fix
make lint-fix    # ruff lint + fix
make mypy        # Type check (aliased as `make types`)
make test        # pytest via tox (all Python versions)
```

**Scoped**:
```bash
TEST_ENVS=py312,py313 make test           # Specific Python versions
ADD_ARGS="-k test_catalog" make test      # Filter tests
RECREATE_ENVS=1 make test                 # Force tox rebuild
```

**CI-like**: `make test-ci` (Docker-based)

## VCR Cassettes (HTTP Snapshots)

**Purpose**: Record GoodData Cloud HTTP calls for reproducible tests.

**Update workflow** (when API changes):
```bash
docker-compose up          # Start local GoodData Cloud
make remove-cassettes      # Delete old fixtures
make test                  # Generates new cassettes
git add tests/**/fixtures/*.yaml
```

**Location**: `tests/**/fixtures/*.yaml`

## Test Pattern

```python
@vcr.use_cassette("tests/catalog/fixtures/test_workspace.yaml")
def test_get_workspace(sdk):
    workspace = sdk.catalog_workspace.get_workspace("demo")
    assert workspace.id == "demo"
```

## Testing Practices

**Extend existing tests, don't create new ones**: When making incremental changes (new property, enum value, field), add to existing test fixtures rather than creating new tests. If a test already validates round-trip, adding to the fixture is sufficient.

## Dependencies

Required: technologies/python
Related: general/general
